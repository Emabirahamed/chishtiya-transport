<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶ö‡¶ø‡¶∂‡¶§‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü - Secure Login</title>
    
    <!-- Firebase v10 SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, onValue, push, update, remove, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyC2BMeBAU-7tLrBw0dKehAVix6mT9C4lWI",
            authDomain: "chishtiya-transport.firebaseapp.com",
            databaseURL: "https://chishtiya-transport-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "chishtiya-transport",
            storageBucket: "chishtiya-transport.firebasestorage.app",
            messagingSenderId: "796543197916",
            appId: "1:796543197916:web:64a0e89d68280986a60a19"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const auth = getAuth(app);
        
        window.db = db;
        window.auth = auth;
        window.dbRef = ref;
        window.dbSet = set;
        window.dbGet = get;
        window.dbOnValue = onValue;
        window.dbPush = push;
        window.dbUpdate = update;
        window.dbRemove = remove;
        window.authSignIn = signInWithEmailAndPassword;
        window.authCreateUser = createUserWithEmailAndPassword;
        window.authOnStateChanged = onAuthStateChanged;
        window.authSignOut = signOut;
        window.firebaseReady = true;
        
        console.log('‚úÖ Firebase with Auth initialized!');
    </script>
    
    <!-- QR Code Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Noto Sans Bengali', 'SolaimanLipi', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #dc3545;
        }
        
        .dot.online {
            background: #28a745;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .auth-container {
            max-width: 450px;
            margin: 80px auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            display: none;
        }
        
        .auth-container.active {
            display: block;
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .auth-header h1 {
            color: #2a5298;
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .auth-header p {
            color: #6c757d;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.05em;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Noto Sans Bengali', Arial, sans-serif;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }
        
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Noto Sans Bengali', Arial, sans-serif;
            transition: all 0.3s;
            width: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-logout {
            background: rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            font-size: 0.9em;
            width: auto;
        }
        
        .error-message {
            background: #f8d7da;
            color: #842029;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
            display: none;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2a5298;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: none;
        }
        
        .container.active {
            display: block;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 25px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .header h1 {
            font-size: 1.8em;
        }
        
        .user-info {
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 10px;
        }
        
        .user-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            margin-left: 8px;
            font-weight: 600;
        }
        
        .badge-admin {
            background: #ffc107;
            color: #000;
        }
        
        .badge-manager {
            background: #17a2b8;
            color: #fff;
        }
        
        .badge-scanner {
            background: #28a745;
            color: #fff;
        }
        
        .badge-delivery {
            background: #fd7e14;
            color: #fff;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Rest of the styles from previous version */
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            overflow-x: auto;
        }
        
        .tab {
            flex: 1;
            padding: 18px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1em;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .tab.visible {
            display: block;
        }
        
        .tab:hover {
            background: #e9ecef;
        }
        
        .tab.active {
            background: white;
            color: #2a5298;
            border-bottom: 3px solid #2a5298;
        }
        
        .content {
            padding: 30px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-management {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .user-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #e9ecef;
        }
        
        .user-card:hover {
            border-color: #2a5298;
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
            }
            .auth-container {
                padding: 25px;
            }
        }
    </style>
</head>
<body>
    <!-- Connection Status -->
    <div class="status">
        <div class="dot" id="statusDot"></div>
        <span id="statusText">‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span>
    </div>

    <!-- Login Screen -->
    <div class="auth-container active" id="loginScreen">
        <div class="auth-header">
            <h1>üöõ ‡¶ö‡¶ø‡¶∂‡¶§‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü</h1>
            <p>üîê ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</p>
        </div>
        
        <div class="error-message" id="loginError"></div>
        
        <form id="loginForm" onsubmit="handleLogin(event)">
            <div class="form-group">
                <label>‡¶á‡¶Æ‡ßá‡¶á‡¶≤ *</label>
                <input type="email" id="loginEmail" required placeholder="your@email.com">
            </div>
            
            <div class="form-group">
                <label>‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° *</label>
                <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            
            <button type="submit" class="btn btn-primary">
                üîì ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
        </form>
    </div>

    <!-- Loading Screen -->
    <div class="auth-container" id="loadingScreen">
        <div class="loading">
            <div class="loading-spinner"></div>
            <p>‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        </div>
    </div>

    <!-- Main App -->
    <div class="container" id="mainApp">
        <div class="header">
            <div>
                <h1>üöõ ‡¶ö‡¶ø‡¶∂‡¶§‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶™‡ßã‡¶∞‡ßç‡¶ü</h1>
                <p>‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ (Secure)</p>
            </div>
            <div>
                <div class="user-info">
                    <div style="font-weight: bold;" id="currentUserName">
                        ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ
                        <span class="user-badge" id="userBadge">User</span>
                    </div>
                    <div style="font-size: 0.9em; opacity: 0.9;" id="currentUserEmail"></div>
                </div>
                <button class="btn btn-logout" onclick="handleLogout()">üö™ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
            </div>
        </div>

        <div class="tabs" id="tabsContainer">
            <button class="tab" id="tab-new-parcel" onclick="showTab('new-parcel')">üì¶ ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßá‡¶≤</button>
            <button class="tab" id="tab-search" onclick="showTab('search')">üîç ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®</button>
            <button class="tab" id="tab-scanner" onclick="showTab('scanner')">üì∑ ‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button class="tab" id="tab-parcel-list" onclick="showTab('parcel-list')">üìã ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßá‡¶≤ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</button>
            <button class="tab" id="tab-accounts" onclick="showTab('accounts')">üí∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</button>
            <button class="tab" id="tab-reports" onclick="showTab('reports')">üìä ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
            <button class="tab" id="tab-users" onclick="showTab('users')">üë• ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</button>
        </div>

        <div class="content" id="contentArea">
            <!-- Content loaded dynamically -->
        </div>
    </div>

    <script>
        let currentUser = null;
        let userRole = null;
        let parcels = [];
        let counter = 1;
        let html5QrCode = null;
        let currentScannedParcelId = null;

        function waitForFirebase(callback) {
            if (window.firebaseReady) callback();
            else setTimeout(() => waitForFirebase(callback), 100);
        }

        // Initialize auth state listener
        waitForFirebase(() => {
            window.authOnStateChanged(window.auth, async (user) => {
                if (user) {
                    // User is signed in
                    await loadUserData(user);
                } else {
                    // User is signed out
                    showLoginScreen();
                }
            });
        });

        async function loadUserData(user) {
            showLoadingScreen();
            
            try {
                const userRef = window.dbRef(window.db, `users/${user.uid}`);
                const snapshot = await window.dbGet(userRef);
                
                if (snapshot.exists()) {
                    const userData = snapshot.val();
                    currentUser = {
                        uid: user.uid,
                        email: user.email,
                        ...userData
                    };
                    userRole = userData.role;
                    
                    initFirebase();
                    showMainApp();
                } else {
                    // User exists in Auth but not in database
                    alert('‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶®‡ßá‡¶á‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                    await window.authSignOut(window.auth);
                }
            } catch (error) {
                console.error('Error loading user data:', error);
                alert('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                await window.authSignOut(window.auth);
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            errorDiv.style.display = 'none';
            
            try {
                await window.authSignIn(window.auth, email, password);
                // onAuthStateChanged will handle the rest
            } catch (error) {
                console.error('Login error:', error);
                let message = '‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§';
                
                if (error.code === 'auth/invalid-credential') {
                    message = '‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤!';
                } else if (error.code === 'auth/user-not-found') {
                    message = '‡¶è‡¶á ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø!';
                } else if (error.code === 'auth/wrong-password') {
                    message = '‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤!';
                } else if (error.code === 'auth/too-many-requests') {
                    message = '‡¶Ö‡¶®‡ßá‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶≠‡ßÅ‡¶≤ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§';
                }
                
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
            }
        }

        async function handleLogout() {
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                try {
                    if (html5QrCode) stopScanning();
                    await window.authSignOut(window.auth);
                    // onAuthStateChanged will handle the rest
                } catch (error) {
                    console.error('Logout error:', error);
                    alert('‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                }
            }
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.add('active');
            document.getElementById('loadingScreen').classList.remove('active');
            document.getElementById('mainApp').classList.remove('active');
            currentUser = null;
            userRole = null;
        }

        function showLoadingScreen() {
            document.getElementById('loginScreen').classList.remove('active');
            document.getElementById('loadingScreen').classList.add('active');
            document.getElementById('mainApp').classList.remove('active');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.remove('active');
            document.getElementById('loadingScreen').classList.remove('active');
            document.getElementById('mainApp').classList.add('active');
            
            document.getElementById('currentUserName').innerHTML = currentUser.name + 
                ' <span class="user-badge badge-' + userRole + '">' + getRoleDisplayName(userRole) + '</span>';
            document.getElementById('currentUserEmail').textContent = currentUser.email;
            
            setupUIForRole(userRole);
        }

        function getRoleDisplayName(role) {
            const roleNames = {
                'admin': '‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®',
                'manager': '‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶æ‡¶∞',
                'scanner': '‡¶≤‡ßá‡¶¨‡¶æ‡¶∞',
                'delivery': '‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶¨‡¶Ø‡¶º'
            };
            return roleNames[role] || '‡¶á‡¶â‡¶ú‡¶æ‡¶∞';
        }

        function setupUIForRole(role) {
            const tabs = {
                'admin': ['new-parcel', 'search', 'scanner', 'parcel-list', 'accounts', 'reports', 'users'],
                'manager': ['new-parcel', 'search', 'scanner', 'parcel-list', 'accounts', 'reports'],
                'scanner': ['scanner'],
                'delivery': ['scanner']
            };

            document.querySelectorAll('.tab').forEach(t => {
                t.classList.remove('visible', 'active');
                t.style.display = 'none';
            });

            (tabs[role] || []).forEach(tabName => {
                const tab = document.getElementById('tab-' + tabName);
                if (tab) {
                    tab.classList.add('visible');
                    tab.style.display = 'block';
                }
            });

            if (role === 'admin' || role === 'manager') {
                loadManagerInterface();
                showTab('new-parcel');
            } else {
                loadScannerInterface(role === 'delivery');
                showTab('scanner');
            }
        }

        function initFirebase() {
            waitForFirebase(() => {
                const connRef = window.dbRef(window.db, '.info/connected');
                window.dbOnValue(connRef, (snap) => {
                    const online = snap.val() === true;
                    document.getElementById('statusDot').className = online ? 'dot online' : 'dot';
                    document.getElementById('statusText').textContent = online ? '‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®' : '‡¶Ö‡¶´‡¶≤‡¶æ‡¶á‡¶®';
                });

                const counterRef = window.dbRef(window.db, 'counter');
                window.dbOnValue(counterRef, (snap) => {
                    if (snap.exists()) counter = snap.val();
                });

                const parcelsRef = window.dbRef(window.db, 'parcels');
                window.dbOnValue(parcelsRef, (snap) => {
                    parcels = [];
                    if (snap.exists()) {
                        snap.forEach(child => {
                            parcels.push({ key: child.key, ...child.val() });
                        });
                    }
                    if (userRole === 'admin' || userRole === 'manager') {
                        updateParcelList();
                        updateReports();
                        updateAccounts();
                    }
                });
            });
        }

        // Placeholder functions - these will contain the full implementation
        function loadManagerInterface() {
            document.getElementById('contentArea').innerHTML = `
                <div id="new-parcel" class="tab-content active">
                    <h2 style="color: #2a5298;">‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßá‡¶≤ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h2>
                    <p style="margin-top: 20px; padding: 30px; background: #e7f3ff; border-radius: 10px; text-align: center;">
                        üîê <strong>Secure System Active!</strong><br><br>
                        ‡¶è‡¶ñ‡¶® ‡¶∂‡ßÅ‡¶ß‡ßÅ authorized users ‡¶∞‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡•§<br>
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßã‡¶≤: <strong>${getRoleDisplayName(userRole)}</strong>
                    </p>
                </div>
                
                <div id="search" class="tab-content">
                    <h2 style="color: #2a5298;">‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßá‡¶≤ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®</h2>
                </div>
                
                <div id="scanner" class="tab-content">
                    <h2 style="color: #2a5298;">‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞</h2>
                </div>
                
                <div id="parcel-list" class="tab-content">
                    <h2 style="color: #2a5298;">‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßá‡¶≤ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
                </div>
                
                <div id="accounts" class="tab-content">
                    <h2 style="color: #2a5298;">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</h2>
                </div>
                
                <div id="reports" class="tab-content">
                    <h2 style="color: #2a5298;">‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</h2>
                </div>
                
                ${userRole === 'admin' ? `
                <div id="users" class="tab-content">
                    <h2 style="margin-bottom: 25px; color: #2a5298;">üë• ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü</h2>
                    <div id="userManagement">
                        <p style="padding: 20px; background: #fff3cd; border-radius: 8px; margin-bottom: 20px;">
                            ‚ö†Ô∏è <strong>‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£:</strong> ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá Firebase Console ‡¶è ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®,
                            ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ Role assign ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
                        </p>
                        <div id="usersList"></div>
                    </div>
                </div>
                ` : ''}
            `;
        }

        function loadScannerInterface(isDelivery) {
            document.getElementById('contentArea').innerHTML = `
                <div id="scanner" class="tab-content active">
                    <h2 style="text-align: center; margin-bottom: 25px; color: #2a5298; font-size: 2em;">
                        ${isDelivery ? 'üèçÔ∏è ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßá‡¶≤ ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®' : 'üì¶ ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßá‡¶≤ ‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®'}
                    </h2>
                    <p style="padding: 20px; background: #d1e7dd; border-radius: 10px; text-align: center; margin-bottom: 20px;">
                        üîê <strong>Secure Access Granted!</strong><br>
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßã‡¶≤: <strong>${getRoleDisplayName(userRole)}</strong>
                    </p>
                </div>
            `;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            const tab = document.getElementById(tabName);
            if (tab) tab.classList.add('active');
            
            const btn = document.getElementById('tab-' + tabName);
            if (btn) btn.classList.add('active');
        }

        function updateParcelList() {}
        function updateReports() {}
        function updateAccounts() {}
        function stopScanning() {}
    </script>
</body>
</html>
